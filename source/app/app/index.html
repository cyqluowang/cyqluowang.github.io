<!doctype html>

<head>
    <meta charset="utf-8">
    <title>美琪科技邀请您</title>
    <meta name="description" content="分享描述" />
    <meta name="viewport" content="initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <script src="js/jquery-1.10.1.min.js"></script>
    <link rel="stylesheet" href="css/idangerous.swiper.css">
    <link rel="stylesheet" href="css/basic.css">
    <link rel="stylesheet" href="css/idangerous.swiper.scrollbar.css">
    <script src="js/turn.js"></script>
    <script src="js/jquery.transit.js"></script>
    <script src="js/idangerous.swiper.min.js"></script>
    <script src="js/idangerous.swiper.scrollbar-2.1.js"></script>
    <script src="js/html5shiv.js"></script>
	<script>document.addEventListener('WeixinJSBridgeReady', function onBridgeReady() {
                WeixinJSBridge.call('hideToolbar');});</script>
    <style>
    .swiper-slide {
        background: url("img/2-3.jpg") no-repeat center center;
        background-size: 100% 100%;
    }
    .swiper-slide .name input {
        border: none;
        border-bottom: 1px solid #545454;
        width: 100px;
        text-align: left;
        background: none;
		font-size:24px;
    }
    .swiper-slide .from {
        float: right;
		top:25px;
		left:50px;
    }
    .swiper-slide .txt {
        padding: 20px;
    }
    .next {
		position: fixed;
        right: 0px;
        width: 30px;
        height: 100%;
        text-align: center;
        background-color: rgba(0,0,0,0.2);      
    }
    #nextIco{
    	-webkit-transform: rotate(90deg);
    	width: 34px;
    	position: fixed;
    	top:50%;
        z-index: 1;
        margin-top: -17px;
        right: 0px;
    }
    .arrow {
        position: fixed;
        bottom: 10px;
        width: 34px;
        display: none;
        opacity: 0.6;
        z-index: 1;
    }
    .br {
        right: 0px;
        -webkit-transform: rotate(140deg);
    }
    .bl {
        left: 0px;
        -webkit-transform: rotate(-140deg);
    }
    body {
        margin: 0;
        font-family: Arial, Helvetica, sans-serif;
        font-size: 16px;
        line-height: 1.5;
    }
    .swiper-container {
        display: none;
    }
    .swiper-scrollbar {
        width: 100%;
        
        position: absolute;
        left: 0;
        bottom: 0px;
        z-index: 1;
    }
    .fullscreen {
        position: absolute;
        width: 320px;
        height: 506px;
        left: 50%;
        top: 50%;
        margin: -252px 0 0 -160px;
        display: none;
    }
    .fullscreen img {
        width: 100%;
        height: 100%;
    }
	
    </style>
</head>

<body>

    <div class="flipbook-viewport">
        <div class="container">
            <div class="flipbook">
			<!--第一张图开始-->
                <div>
                    <div class="fullscreen">
                        <img src="img/2.jpg">
                    </div>
                    <div class="next">
                    	<img src="img/arrow_b.png" id="nextIco">
                    </div>
                </div>
				<!--第一张图结束-->
				<div>
                    <div class="fullscreen page3" style="display:none;">
                        <img src="img/2-2.jpg">
                    </div>
                    <img src="img/arrow_b.png" class="arrow br">
                </div>
			<!--第三张图开始-->
                <div>
                    <div class="swiper-container">
                        <div class="swiper-scrollbar"></div>
                        <div class="swiper-wrapper">
                            <div class="swiper-slide">
                                <div class="txt">
                                 <p class="name to">Dear&nbsp;
                                        <input type="text">
                                    </p>
                                    <p>Here goes some text</p>
                                    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nullam dictum ipsum auctor nulla consectetur sed porta nunc placerat.</p>
                                    <p>Nulla dui augue, sollicitudin egestas consequat a, consequat quis neque. Sed at mauris nunc. Donec rutrum leo id risus congue convallis. Maecenas ultrices condimentum velit, nec tincidunt lorem convallis consequat. Nulla elementum consequat quam eu euismod</p>
                                    <p class="name from">Yours&nbsp;
                                        <input type="text">
                                    </p>
									
                                   <!--  <div style="position:absolute; top:50px; left:70px;"><p  style="color:#FF9900; font-style:italic;font-size:24px">杨光明</p></div>-->
                                   <!--  <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nullam dictum ipsum auctor nulla consectetur sed porta nunc placerat.</p>
                                    <p>Nulla dui augue, sollicitudin egestas consequat a, consequat quis neque. Sed at mauris nunc. Donec rutrum leo id risus congue convallis. Maecenas ultrices condimentum velit, nec tincidunt lorem convallis consequat. Nulla elementum consequat quam eu euismod</p>
                                    <p class="name from">Yours&nbsp;
                                        <input type="text">
                                    </p>
									-->
									 <!-- <div style="position:absolute; bottom:23px; left:390px;"> <p style="color:#000000; font-style:italic; font-size:20px">美<font color="#CC0000" face="楷体">琪</font>科技</p></div>
									<div style="position:absolute; bottom:2px; left:390px;"> <p style="color:#000000; font-style:italic; font-size:18px">0571-86076517</p></div>									<div style="position:absolute; bottom:-20px; left:390px;"> <p style="color:#000000; font-style:italic; font-size:18px">2014&nbsp;&nbsp;11 &nbsp;&nbsp;13 </p></div>-->
									<!--<div style="position:absolute; top:485px; font-size:12px;left:130px; z-index:1">
									<p style=" font-style:inherit ; color:#FF9900">
									 <font face="黑体" style="color:#FFFFFF; font-size:12px;">邀&nbsp;请&nbsp;人：</font>浙江美琪<br/>
								  <font face="黑体" style="color:#FFFFFF; font-size:12px;">联系电话：</font>0571-86076517<br/>
								  <font face="黑体" style="color:#FFFFFF; font-size:12px;">日&nbsp;&nbsp;&nbsp;期：</font> 2014<font face="黑体" style="color:#FFFFFF; font-size:12px;">年</font>11<font face="黑体" style="color:#FFFFFF; font-size:12px;">月</font>15<font face="黑体" style="color:#FFFFFF; font-size:12px;">日</font>
									</p>
									</div>-->
									<!-- <p class="name from">&nbsp;
                                        <input type="text" type="hidden" value="美琪科技">
                                    </p>-->
                                </div>
                            </div>
                        </div>
                    </div>
                    <img src="img/arrow_b.png" class="arrow br">
                </div>
				<!--第三张图结束-->
			<!--第四张图开始-->
                <div>
                    <div class="fullscreen page3" style="display:none;">
                        <img src="img/2-4.jpg">
                    </div>
                    <img src="img/arrow_b.png" class="arrow bl">
                </div>
			<!--第四张图结束-->
			
            </div>
        </div>
    </div>
    <!-- <audio id="audio" src="video/v.mp3" preload="none" controls="controls" loop="true" hidden="true"> -->
    <script type="text/javascript">
    var mySwiper = "";
    var time = "";
    var time1 = ""
    var sender = "";
    var receiver = "";
    var url = decodeURI(window.location.href);
    var end = window.location.href.indexOf("?")
    if (end != -1) url = url.substring(0, end);

    window.onload = function() {
        bindWeixinFun();
        sender = GetQueryString("s");
        receiver = GetQueryString("t");
        if (sender != null) $(".from input").val(sender);
        if (receiver != null) $(".to input").val(receiver);

        function GetQueryString(name) {

            var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)", "i");

            var r = decodeURI(window.location.search).substr(1).match(reg);

            if (r != null) return unescape(r[2]);
            return null;

        }
        var h = document.documentElement.clientHeight;
        var w = document.documentElement.clientWidth;
        ws = w / 320.0;
        hs = h / 526.0;
        if (ws - hs > 1) ws = hs;

        $('.fullscreen').each(function() {
            $(this).css({
                scale: hs < ws ? ws : hs
            });
            $(this).show();
        });

        $('.flipbook').turn({
            width: w,
            height: h,
            duration: 1000,
            elevation: 50,
            gradients: true,
            autoCenter: false,
            display: "single",
            pages: 3
        });

        $(".flipbook").bind("turned", function(event, page, view) {
            if (mySwiper == "") {
                mySwiper = new Swiper('.swiper-container', {
                    scrollContainer: true,
                    scrollbar: {
                        container: '.swiper-scrollbar',
                        hide: false
                    }
                })
            }
            $(".arrow").show();
            if (time != "") {
                clearInterval(time)
            }

            if (page == 2) {
                time = setInterval(function(argument) {
                    $(".br").transition({
                        right: -6,
                        bottom: 4
                    }, 500, function() {
                        $(".br").css({
                            "right": "0px",
                            "bottom": "10px"
                        });
                    });
                }, 1000)
            } else if (page == 3) {
                time = setInterval(function(argument) {
                    $(".bl").transition({
                        left: -6,
                        bottom: 4
                    }, 500, function() {
                        $(".bl").css({
                            "left": "0px",
                            "bottom": "10px"
                        });
                    });
                }, 1000)
            }
        });
        $(".swiper-slide").height(h);
        $(".swiper-slide").width(w);
        $(".swiper-container").width(w);
        $(".swiper-container").show();
        var myAuto = document.createElement('audio');
        myAuto.src = "video/v.mp3";
        myAuto.id = "myAuto";
        $("body").append(myAuto);
        myAuto.play();
    };

    $(".next").click(function (argument) {
    	$(".flipbook").turn("next");
    })

    //微信分享数据
    var link = decodeURI(window.location.href);
    var shareData = {
        "img_url": 'http://121.199.21.117/h/img/yx.png',
        "link": link,
        "title": '邀请函',
        "desc": '美琪科技，诚挚地邀请您的光临'
    };

    //绑定微信分享事件
    function bindWeixinFun() {
        document.addEventListener('WeixinJSBridgeReady', function onBridgeReady() {
            WeixinJSBridge.on('menu:share:timeline', function(argv) {
                WeixinJSBridge.invoke('shareTimeline', {
                    "img_url": shareData.img_url,
                    "img_width": "92",
                    "img_height": "92",
                    "link": shareData.link,
                    "desc": shareData.desc,
                    "title": shareData.title
                }, function() {});
            });

            WeixinJSBridge.on('menu:share:appmessage', function(argv) {
                WeixinJSBridge.invoke('sendAppMessage', {
                    "img_url": shareData.img_url,
                    "link": shareData.link,
                    "desc": shareData.desc,
                    "title": shareData.title
                }, function() {});
            });

            WeixinJSBridge.on('menu:share:weibo', function(argv) {
                WeixinJSBridge.invoke('shareWeibo', {
                    "desc": shareData.desc,
                    "url": shareData.link,
                }, function(res) {});
            });
        }, false);
    }

    $(".from input").on("change", function(argument) {
        sender = $(this).val();
        shareData.link = encodeURI(url + "?s=" + sender + "&t=" + receiver);
    })

    $(".to input").on("change", function(argument) {
        receiver = $(this).val();
        shareData.link = encodeURI(url + "?s=" + sender + "&t=" + receiver);
    })
</script>
</body>

</html>
