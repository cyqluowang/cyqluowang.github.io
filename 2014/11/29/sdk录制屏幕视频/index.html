<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"/><meta content="yes" name="apple-mobile-web-app-capable"/><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"/><meta content="telephone=no" name="format-detection"/><meta name="description"/><title>sdk录制屏幕视频 | 无醉</title><link rel="stylesheet" type="text/css" href="/css/normalize.css"/><link rel="stylesheet" type="text/css" href="/css/pure-min.css"/><link rel="stylesheet" type="text/css" href="/css/grids-responsive-min.css"/><link rel="stylesheet" type="text/css" href="/css/style.css"/><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"/><link rel="apple-touch-icon" href="/apple-touch-icon.png"/><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"/><link rel="alternate" type="application/atom+xml" href="/atom.xml"/></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">sdk录制屏幕视频</h1><a id="logo" href="/">无醉</a><p class="description">所过之处皆成岚</p></div><div id="nav-menu"><a href="/" class="current"><i class="icon-home"> 首页</i></a><a href="/archives/"><i class="icon-archive"> 归档</i></a><a href="/about/"><i class="icon-about"> 关于</i></a></div></div><div id="layout" class="pure-g"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post post-page"><h1 class="post-title">sdk录制屏幕视频</h1><div class="post-meta">2014-11-29 | </div><span data-thread-key="2014/11/29/sdk录制屏幕视频/" class="ds-thread-count"></span><div class="post-content"><h1 id="Android视频录制命令screenrecord"><a href="#Android视频录制命令screenrecord" class="headerlink" title="Android视频录制命令screenrecord"></a>Android视频录制命令screenrecord</h1><h2 id="你要知道"><a href="#你要知道" class="headerlink" title="你要知道:"></a>你要知道:</h2><p>screenrecord是一个shell命令<br>支持Android4.4(API level 19)以上<br>支持视频格式: mp4</p>
<h2 id="一些限制"><a href="#一些限制" class="headerlink" title="一些限制"></a>一些限制</h2><p>某些设备可能无法直接录制,原因是分辨率太高,如果遇到此类问题，请试着指定较低的分辨率<br>不支持录制过程中屏幕旋转,如果录制过程中旋转，有可能画面被切断<br>录制视频的时候声音不会被录下来</p>
<h2 id="开始录制命令"><a href="#开始录制命令" class="headerlink" title="开始录制命令:"></a>开始录制命令:</h2><figure class="highlight smali"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">adb shell screenrecord /sdcard/demo.mp4 </div><div class="line">说明:录制手机屏幕,视频格式为mp4,存放到手机sd卡里，默认录制时间为180s</div></pre></td></tr></table></figure>
<a id="more"></a>
<h2 id="限制录制时间"><a href="#限制录制时间" class="headerlink" title="限制录制时间:"></a>限制录制时间:</h2><p>参数: –time-limit<br><figure class="highlight maxima"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">adb shell screenrecord  --<span class="built_in">time</span>-<span class="built_in">limit</span> <span class="number">10</span> /sdcard/<span class="built_in">demo</span>.mp4 </div><div class="line">说明:限制视频录制时间为10s,如果不限制,默认180s</div></pre></td></tr></table></figure></p>
<h2 id="指定视频分辨率大小："><a href="#指定视频分辨率大小：" class="headerlink" title="指定视频分辨率大小："></a>指定视频分辨率大小：</h2><p>参数: –size<br><figure class="highlight dns"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">adb shell screenrecord --size <span class="number">1280*720</span> /sdcard/demo.mp4</div><div class="line">说明:录制视频，分辨率为<span class="number">1280*720</span>，如果不指定默认使用手机的分辨率,为获得最佳效果，</div><div class="line">请使用设备上的高级视频编码（AVC）支持的大小</div></pre></td></tr></table></figure></p>
<h2 id="指定视频的比特率"><a href="#指定视频的比特率" class="headerlink" title="指定视频的比特率"></a>指定视频的比特率</h2><p>参数: –bit-rate<br><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">adb <span class="built_in">shell</span> screenrecord <span class="comment">--bit-rate 6000000 /sdcard/demo.mp4 </span></div><div class="line">说明:指定视频的比特率为<span class="number">6</span>Mbps,如果不指定,默认为<span class="number">4</span>Mbps. </div><div class="line">你可以增加比特率以提高视频质量或为了让文件更小而降低比特率</div></pre></td></tr></table></figure></p>
<h2 id="在命令行显示log"><a href="#在命令行显示log" class="headerlink" title="在命令行显示log"></a>在命令行显示log</h2><p>参数: –verbose<br><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">cyq$ adb <span class="built_in">shell</span> screenrecord <span class="comment">--time-limit 10 --verbose /sdcard/demo.mp4 </span></div><div class="line">Main display is <span class="number">1080</span>x1920 @<span class="number">60.00</span>fps (orientation=<span class="number">0</span>) Configuring recorder <span class="keyword">for</span> <span class="number">1080</span>x1920 video <span class="keyword">at</span> <span class="number">4.00</span>Mbps Content area is <span class="number">1080</span>x1920 <span class="keyword">at</span> <span class="built_in">offset</span> x=<span class="number">0</span> y=<span class="number">0</span> Time limit reached Encoder stopping; recorded <span class="number">96</span> frames <span class="keyword">in</span> <span class="number">10</span> <span class="built_in">seconds</span> Stopping encoder <span class="keyword">and</span> muxer Executing: /<span class="keyword">system</span>/bin/am broadcast -<span class="keyword">a</span> android.intent.action.MEDIA_SCANNER_SCAN_FILE -d <span class="built_in">file</span>:<span class="comment">///sdcard/demo.mp4 Broadcasting: Intent &#123; act=android.intent.action.MEDIA_SCANNER_SCAN_FILE dat=file:///sdcard/demo.mp4 &#125; Broadcast completed: result=0</span></div></pre></td></tr></table></figure></p>
<h2 id="旋转90度"><a href="#旋转90度" class="headerlink" title="旋转90度"></a>旋转90度</h2><p>参数: –rotate</p>
<p>说明:此功能为实验性的，好不好用不知道</p>
<h2 id="查看帮助命令"><a href="#查看帮助命令" class="headerlink" title="查看帮助命令"></a>查看帮助命令</h2><p>参数: –help<br><figure class="highlight maxima"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">cyq~$ adb shell screenrecord --help Usage: screenrecord [options] &lt;filename&gt; Records the device's <span class="built_in">display</span> to a .mp4 file. Options: --size WIDTHxHEIGHT Set the video size, e.g. <span class="string">"1280x720"</span>.  Default <span class="built_in">is</span> the device's main <span class="built_in">display</span> <span class="built_in">resolution</span> (<span class="keyword">if</span> supported), 1280x720 <span class="keyword">if</span> <span class="keyword">not</span>.  For best results, use a size supported by the AVC encoder. --bit-rate RATE Set the video bit rate, <span class="keyword">in</span> megabits per <span class="built_in">second</span>.  Default 4Mbps. --<span class="built_in">time</span>-<span class="built_in">limit</span> TIME Set the maximum recording <span class="built_in">time</span>, <span class="keyword">in</span> seconds.  Default / maximum <span class="built_in">is</span> <span class="number">180</span>. --rotate Rotate the output <span class="number">90</span> degrees. --<span class="built_in">verbose</span> Display interesting information on stdout. --help Show this message. Recording continues until Ctrl-C <span class="built_in">is</span> hit <span class="keyword">or</span> the <span class="built_in">time</span> <span class="built_in">limit</span> <span class="built_in">is</span> reached.</div></pre></td></tr></table></figure></p>
<h2 id="导出视频："><a href="#导出视频：" class="headerlink" title="导出视频："></a>导出视频：</h2><figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">adb pull /sdcard/demo<span class="selector-class">.mp4</span></div><div class="line">说明:导出视频到当前目录</div></pre></td></tr></table></figure>
<h2 id="截图"><a href="#截图" class="headerlink" title="截图"></a>截图</h2><p>导出到桌面后用射手影音播放器F5截图，</p>
<h2 id="gif"><a href="#gif" class="headerlink" title="gif"></a>gif</h2><p>再用图片生成gif图片</p>
</div><div class="tags"><a href="/tags/Android/">Android</a></div><div class="post-nav"><a href="/2015/12/06/2015小结/" class="pre"><i class="icon-previous">2015小结</i></a><a href="/2014/11/24/加密app/" class="next">加密app<i class="icon-next"></i></a></div><div data-thread-key="2014/11/29/sdk录制屏幕视频/" data-title="sdk录制屏幕视频" data-url="http://cyqluowang.github.io/2014/11/29/sdk录制屏幕视频/" class="ds-share flat"><div class="ds-share-inline"><ul class="ds-share-icons-16"><li data-toggle="ds-share-icons-more"><a href="javascript:void(0);" class="ds-more">分享到：</a></li><li><a href="javascript:void(0);" data-service="weibo" class="ds-weibo">微博</a></li><li><a href="javascript:void(0);" data-service="qzone" class="ds-qzone">QQ空间</a></li><li><a href="javascript:void(0);" data-service="qqt" class="ds-qqt">腾讯微博</a></li><li><a href="javascript:void(0);" data-service="wechat" class="ds-wechat">微信</a></li></ul><div class="ds-share-icons-more"></div></div></div><div data-thread-key="2014/11/29/sdk录制屏幕视频/" data-title="sdk录制屏幕视频" data-url="http://cyqluowang.github.io/2014/11/29/sdk录制屏幕视频/" data-author-key="1" class="ds-thread"></div></div></div></div><div class="pure-u-1-4"><div id="sidebar"><div class="widget"><form action="//www.baidu.com/baidu" method="get" accept-charset="utf-8" target="_blank" class="search-form"><input type="search" name="word" maxlength="20" placeholder="Search" class="search-form-input"/><input type="hidden" name="si" value="http://cyqluowang.github.io"/><input name="tn" type="hidden" value="bds"/><input name="cl" type="hidden" value="3"/><input name="ct" type="hidden" value="2097152"/><input name="s" type="hidden" value="on"/></form></div><div class="widget"><div class="widget-title">分类</div></div><div class="widget"><div class="widget-title">标签</div><div class="tagcloud"><a href="/tags/总结/" style="font-size: 15px;">总结</a> <a href="/tags/spring/" style="font-size: 15px;">spring</a> <a href="/tags/Android/" style="font-size: 15px;">Android</a> <a href="/tags/IOS/" style="font-size: 15px;">IOS</a> <a href="/tags/管理学/" style="font-size: 15px;">管理学</a> <a href="/tags/git/" style="font-size: 15px;">git</a> <a href="/tags/技巧/" style="font-size: 15px;">技巧</a> <a href="/tags/Mac/" style="font-size: 15px;">Mac</a> <a href="/tags/汽车/" style="font-size: 15px;">汽车</a></div></div><div class="widget"><div class="widget-title">最新文章</div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2017/05/10/wedding/wedding/">wedding/wedding</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/05/10/wedding/README/">wedding/README</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/05/10/wedding/index/">wedding/index</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/03/21/password/">password</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/03/08/AIDL/">AIDL</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/27/自定义控件/">自定义控件</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/22/Redis/">Redis</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/22/Druid/">Druid</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/22/Mybatis/">Mybatis</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/22/热部署/">热部署</a></li></ul></div><div class="widget"><div class="comments-title">最近评论</div><div data-num-items="5" data-show-avatars="0" data-show-time="1" data-show-admin="0" data-excerpt-length="32" data-show-title="1" class="ds-recent-comments"></div></div><div class="widget"><div class="widget-title">友情链接</div><ul></ul><a href="http://www.19lou.com/" title="19lou" target="_blank">19lou</a><ul></ul><a href="http://www.renrunkeji.com/" title="仁润科技" target="_blank">仁润科技</a><ul></ul><a href="https://www.haomwei.com/technology/maupassant-hexo.html" title="maupassant使用" target="_blank">maupassant使用</a></div></div></div></div><div id="footer">© <a href="/" rel="nofollow">无醉.</a> QQ:573700261.</div><a id="rocket" href="#top" class="show"></a><script src="/js/jquery.min.js"></script>
<script src="/js/totop.js"></script><script src="/js/fancybox.pack.js"></script>
<script src="/js/jquery.fancybox.js"></script><link rel="stylesheet" href="/css/jquery.fancybox.css"><script>var duoshuoQuery = {short_name:'cyqluowang'};
(function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0]
        || document.getElementsByTagName('body')[0]).appendChild(ds);
})();
</script></div></body></html>